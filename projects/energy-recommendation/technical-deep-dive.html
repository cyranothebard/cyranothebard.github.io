---
layout: english
title: "Energy Recommendation System - Technical Deep-Dive"
lang: en
---
<nav aria-label="breadcrumb" class="mb-3">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/projects">Projects</a></li>
    <li class="breadcrumb-item"><a href="/projects/energy-recommendation/">Energy Recommendation</a></li>
    <li class="breadcrumb-item active" aria-current="page">Technical Deep-Dive</li>
  </ol>
</nav>

<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <a href="/projects/energy-recommendation/management-perspective.html" class="me-2">Management</a>
    <a href="/projects/energy-recommendation/product-strategy.html">Product</a>
  </div>
  <div>
    <a href="/projekte/energie-empfehlungssystem/technische-details.html" class="btn btn-outline-secondary btn-sm">DE</a>
  </div>
</div>

<div class="row">
  <div class="col-lg-8">
    <h1 class="mb-3">Technical Deep-Dive</h1>
    <p class="lead">Exact content from the final report, adapted to site formatting.</p>

    <h5>Technical Approach &amp; Architecture</h5>

    <h6>System Architecture Overview</h6>
    <p>For our project, we developed a three-stage machine learning pipeline that transforms weather forecasts into coordinated building recommendations:</p>
    <figure class="mb-3">
      <img src="{{ '/assets/img/energy-recommendation/energy-recommender-architecture.png' | relative_url }}" class="img-fluid" alt="Solution architecture diagram" />
      <figcaption class="mt-2 small text-muted">Figure 1: Solution architecture. LSTM demand forecasting and grid strain prediction combine with compliance modeling to feed portfolio optimization recommendations that are served to the operator dashboard interface.</figcaption>
    </figure>

    <p><strong>Stage 1: Multi-Cohort Demand Forecasting</strong><br/>
    This stage consisted of a multi-output LSTM neural network predicting 24-hour ahead demand for 15 building cohorts covering &gt;94% of all building stock, a 48-hour weather lookback window (temperature, humidity, wind speed), and is trained on NREL Building Stock Data with Massachusetts climate patterns.</p>

    <p><strong>Stage 2: Compliance Prediction &amp; Modeling</strong><br/>
    This stage consisted of building-specific compliance probability based on operational characteristics, domain expertise rules accounting for HVAC system types, building operations, and contextual factors, and a realistic 36.3% average compliance rate aligned with industry research.</p>

    <p><strong>Stage 3: Portfolio Optimization</strong><br/>
    This stage coordinated building selection algorithm maximizing grid impact, included constraint-based optimization respecting individual building capabilities, and multiple scenario planning (conservative 30%, emergency 70% participation).</p>

    <h6>Data Sources &amp; Scale</h6>
    <p>We used the NREL Commercial Building Stock Data (Massachusetts baseline), covering 8,111 buildings across 13 types and 34 HVAC configurations, with 625 energy characteristics per building. Synthetic weather data modeled Massachusetts climate patterns for extreme-weather testing.</p>
    <p><strong>Processing Performance:</strong> The system processes 8,000+ buildings in under 30 seconds with &lt;50MB memory usage, supporting cost-effective cloud deployment and Spark-ready distributed scaling.</p>

    <h5 class="mt-4">Neural Network Implementation &amp; Validation</h5>
    <p>We built a 2-layer multi-output PyTorch LSTM for commercial building energy forecasting. The network includes 15 cohort-specific prediction heads, uses a 48-hour weather lookback with a 24-hour forecast horizon, and incorporates inputs such as temperature, humidity, wind speed, and building characteristics. Training used temporal validation splits to prevent data leakage, a critical step for time-series modeling.</p>

    <h6>Model Development Methodology</h6>
    <p>The LSTM architecture was selected based on its proven effectiveness for time series forecasting in commercial building applications. Our implementation process followed systematic validation protocols:</p>

    <p><strong>Training Strategy:</strong> The model employed temporal validation splits to prevent data leakage, a critical consideration for time series forecasting where traditional random splits would invalidate results by incorporating future information into training data.</p>

    <p><strong>Architecture Selection:</strong> The 2-layer design with 15 cohort-specific outputs balances model complexity with training efficiency. Each cohort head enables specialized learning for different building types while sharing common temporal pattern recognition in the base layers.</p>

    <p><strong>Domain-Specific Adaptations:</strong> Weather feature engineering incorporated 48-hour lookback windows to capture thermal lag effects in building energy systems, while building characteristics were embedded to provide context-aware forecasting for each cohort.</p>

    <figure class="mb-3">
      <img src="{{ '/assets/img/energy-recommendation/energy-recommender-lstm-performance.png' | relative_url }}" class="img-fluid" alt="LSTM forecasting performance by cohort and scenario" />
      <figcaption class="mt-2 small text-muted">Figure 2: LSTM forecasting performance by cohort and weather scenario. Average RMSE for grid strain scenarios shown, demonstrating system performance within literature-supported ranges. Large buildings tended to have larger errors.</figcaption>
    </figure>

    <div class="table-responsive">
      <table class="table table-sm">
        <thead>
          <tr>
            <th class="text-center">Time Horizon</th>
            <th class="text-center">Heat Wave - RMSE</th>
            <th class="text-center">Heat Wave - MAPE</th>
            <th class="text-center">Cold Snap - RMSE</th>
            <th class="text-center">Cold Snap - MAPE</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-center"><strong>1-hour ahead</strong></td>
            <td class="text-center"><strong>1.86 MW</strong></td>
            <td class="text-center"><strong>7.29%</strong></td>
            <td class="text-center"><strong>4.64 MW</strong></td>
            <td class="text-center"><strong>17.11%</strong></td>
          </tr>
          <tr>
            <td class="text-center"><strong>6-hours ahead</strong></td>
            <td class="text-center"><strong>10.43 MW</strong></td>
            <td class="text-center"><strong>29.45%</strong></td>
            <td class="text-center"><strong>8.79 MW</strong></td>
            <td class="text-center"><strong>28.40%</strong></td>
          </tr>
          <tr>
            <td class="text-center"><strong>12-hours ahead</strong></td>
            <td class="text-center"><strong>12.49 MW</strong></td>
            <td class="text-center"><strong>23.41%</strong></td>
            <td class="text-center"><strong>10.49 MW</strong></td>
            <td class="text-center"><strong>28.42%</strong></td>
          </tr>
        </tbody>
      </table>
    </div>
    <p class="small text-muted">Table 2. LSTM performance across 1, 6, and 12 hour forecast timelines presented for heat wave and cold snap extreme weather scenarios in both RMSE and MAPE for academic literature comparison. Performance in line with production-viable range established for commercial building applications (Okotore, 2024).</p>

    <p>This methodological rigor ensures our performance metrics provide reliable foundations for the portfolio optimization algorithms that follow. While our analysis uses RMSE for internal model comparison across weather scenarios, literature benchmarks typically report MAPE for cross-study comparison. Our 12-hour RMSE values of 23.41-28.42% correspond to forecast accuracy levels consistent with the 20-25% MAPE range established as production-viable for commercial building applications (Okotore, 2024), particularly given the extreme weather conditions tested.</p>

    <p><strong>Technical Achievement:</strong> Our multi-cohort approach balances building-level accuracy with portfolio-level coordination, emphasizing relative demand patterns during extreme weather over absolute consumption.</p>

    <p><strong>Integration with Optimization:</strong> The LSTM feeds into portfolio optimization by generating weather scenarios, forecasting 24-hour demand, detecting grid strain, and coordinating building responses for maximum impact.</p>

    <p class="mt-4"><a href="/projects/energy-recommendation/" class="btn btn-outline-primary">Back to overview</a></p>
  </div>

  <div class="col-lg-4">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Navigation</h5>
        <div class="d-grid gap-2">
          <a href="/projects/energy-recommendation/" class="btn btn-outline-secondary">← Overview</a>
          <a href="/projects/energy-recommendation/management-perspective.html" class="btn btn-outline-primary">Management →</a>
        </div>
      </div>
    </div>

    <div class="card mt-3">
      <div class="card-body">
        <h6 class="card-title">Tech Stack</h6>
        <div class="d-flex flex-wrap gap-1">
          <span class="badge bg-success">PyTorch</span>
          <span class="badge bg-success">LSTM</span>
          <span class="badge bg-info">FastAPI</span>
          <span class="badge bg-info">Docker</span>
          <span class="badge bg-warning text-dark">Kubernetes</span>
          <span class="badge bg-warning text-dark">AWS</span>
        </div>
      </div>
    </div>
  </div>
</div>
